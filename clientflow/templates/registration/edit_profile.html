
{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block head %}
{{ wizard.form.media }}
<script type="text/javascript">
function TestaCPF(strCPF) {
    var Soma;
    var Resto;
    Soma = 0;
  if (strCPF == "00000000000") return false;

  for (i=1; i<=9; i++) Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (11 - i);
  Resto = (Soma * 10) % 11;

    if ((Resto == 10) || (Resto == 11))  Resto = 0;
    if (Resto != parseInt(strCPF.substring(9, 10)) ) return false;

  Soma = 0;
    for (i = 1; i <= 10; i++) Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (12 - i);
    Resto = (Soma * 10) % 11;

    if ((Resto == 10) || (Resto == 11))  Resto = 0;
    if (Resto != parseInt(strCPF.substring(10, 11) ) ) return false;
    return true;
}
function submitForm(){
  let val = TestaCPF($("[name='cpf']").val());
  if (val == false){
    alert("O cpf informado Ã© invalido")
  }
  else if(val == true){
    $("#submit-btn").click();
  }
}

  $(document).ready(function() {
    $('#submit-btn').hide()
    $("#id_nascimento").datepicker({
      dateFormat: "dd/mm/yy",
      yearRange: "-20:+0",
      monthNamesShort: [ "Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez" ],
      changeMonth: true,
      changeYear: true,
      showButtonPanel: true,
      yearRange: "1930:2002"
    });
  });
</script>
<style>
  #ui-datepicker-div{
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    z-index: 9999 !important;

    -webkit-transform   : translateX(-50%) translateY(-50%) !important;
    -moz-transform      : translateX(-50%) translateY(-50%) !important;
    -ms-transform       : translateX(-50%) translateY(-50%) !important;
    transform           : translateX(-50%) translateY(-50%) !important;
  }
</style>

{% endblock %}
{% block content %}

<div class='row info-bg'>
  <div class='col-10 info-bar-text'>
    <p>Editar seu perfil</p>
  </div>
</div>
<div class='row middle'>
  <div class='mx-auto'>
    <form action="" method="post">
      {% crispy form %}
    </form>
  </div>
</div>
<div class="endofcontent"></div>
<div class="footer margin-footer" style="z-index:3;">
    <span class="footer-text" onclick="submitForm()">
      Continuar
    </span>
</div>
{% endblock %}
