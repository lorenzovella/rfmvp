{% load static %}
<html>

  <head>

    <title>Ração do Futuro</title>

    <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/extra.js' %}"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/extra.css' %}">
    <style>
    .topbar {
     min-height: 90px;
     background-color: #19437a;
     margin-top: 40px;
     box-shadow: 3px 3px 30px #2b2b2b;
     flex-wrap: wrap;
     z-index:10;
    }
    .popoverbar {
      min-height: 40px;
      background-color: #03FB5C;
    }
    body {
      font-family: "Poppins",sans-serif;
      padding-top: 150px;
    }
    .header-text {
      font-size: 0.825em;
      color: #19437a;
      letter-spacing: 1px;
      text-transform: initial;
    }
    .progress {
      height: 60px;
    }
    .progress-bar {
      height: 4px;
      background-color: #00FB5C;
      overflow: visible;
      margin-top: 26px;
    }
    .disabled-bar {
      background-color: #395F8D !important;
    }
    .progress-bar.icon-bar::after{
    position: relative;
    content: url({% static 'ico/Dog-Symbol.png' %});
    display: block;
    align-self: flex-end;
    margin-right: -2em;
    z-index:2;
    }
    .one, .two, .three, .four{
    background-color: #00FB5C;
    position:absolute;
  	z-index:1;
  	height:14px;
  	width:14px;
  	border-radius: 7px;
    margin-top: 21px;
    }
    .progress-bar-text {
      font-family: 'Roboto', sans-serif;
      color: #00FB5C;
      position: fixed;
      padding-top: 2em;
      margin-left: -1.7em;

    }
    .one{
    	left: 1%;
    }
    .two{
    	left:33%;
    }
    .three{
      right:33%
    }
    .four{
      right:1%
    }
    </style>
  </head>


  <body>
    <div id="content" class="container">
      <nav class="navbar navbar-expand-lg fixed-top popoverbar d-flex">
            <span class="mx-auto header-text">Entrega disponível apenas para a <b>Grande Florianópolis</b></span>
      </nav>
      <nav class="navbar navbar-expand-lg fixed-top topbar">
        <div class="col-10 float-none bg-transparent progress mx-auto">
          <div class="one">          <b class="progress-bar-text">SEU CÃO</b></div>
          <div class="two">          <b class="progress-bar-text">REFEIÇÕES</b></div>
          <div class="three disabled-bar">          <b class="progress-bar-text">PLANOS</b></div>
          <div class="four disabled-bar">          <b class="progress-bar-text">CHECKOUT</b></div>
          <div class="progress-bar icon-bar" style="width: 50%;"></div>
          <div class="progress-bar disabled-bar" style="width: 50%;"></div>
        </div>
      </nav>
      <div class="row">
        <h2>Home: </h2>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Your Apps</h5>
            <p class="card-text">{% block content %}{% endblock %}</p>
          </div>
        </div>
        <div class="container mt-3">
          <div class="card">
            <div class="card-body">
                <h5 class="card-title">WebSocket Messages</h5>
                <p class="card-text"><code id="messages"></code></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
        var wsprotocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://'
        var ws = wsprotocol + window.location.hostname + ':' + window.location.port + '/ws/'
        var socket = new WebSocket(ws);

        socket.onopen = function() {
          // Web Socket is connected, send some text
          socket.send("Text from Javascript");
          // Send some binary data
          socket.send(new Blob(["Bytes from Javascript"]));
        };

        socket.onmessage = function (evt) {
          console.log(evt)
          var received_msg = evt.data;
          console.log("Message received...", received_msg);
          var node = document.createElement("div");
          if (received_msg instanceof Blob) {
            received_msg.text().then(function (received_text) {
              var textnode = document.createTextNode("> " + received_text);
              node.appendChild(textnode);
              document.getElementById("messages").appendChild(node);
            })
          } else {
            var textnode = document.createTextNode("> " + received_msg);
            node.appendChild(textnode);
            document.getElementById("messages").appendChild(node);
          }
        };
    </script>
  </body>
</html>
