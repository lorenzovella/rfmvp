{% load static %}
<html>

  <head>

    <title>Ração do Futuro</title>

    <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/extra.js' %}"></script>

    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
    <link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.theme.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/extra.css' %}">
    <style>
    .topbar {
     min-height: 90px;
     background-color: #19437a;
     margin-top: 40px;
     box-shadow: 3px 3px 30px #2b2b2b;
     flex-wrap: wrap;
     z-index:10;
    }
    .popoverbar {
      min-height: 40px;
      background-color: #03FB5C;
    }
    body {
      font-family: "Poppins",sans-serif;
      padding-top: 150px;

    }
    .header-text {
      font-size: 0.825em;
      color: #19437a;
      letter-spacing: 1px;
      text-transform: initial;
    }
    .progress-dog {
      height: 4px;
      width:80em;
      background-color: #00FB5C;
    }
    .barimage {
      content: '';
      background: url({% static 'ico/Dog-Symbol.png' %});
    }
    </style>
  </head>


  <body>
    <div id="content" class="container">
      <nav class="navbar navbar-expand-lg fixed-top popoverbar d-flex">
            <strong class="mx-auto header-text">Entrega disponível apenas para a <span style="font-weight: 900 !important;">Grande Florianópolis</span></strong>
      </nav>
      <nav class="navbar navbar-expand-lg fixed-top topbar">
        <div class="col-12 float-none bg-transparent progress">
          <div class="d-inline progress-bar progress-dog w-75" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" role="progressbar">
          </div>
          <div class="d-inline mr-3 barimage">
          </div>
        </div>
      </nav>
      <div class="row">
        <h2>Home: </h2>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Your Apps</h5>
            <p class="card-text">{% block content %}{% endblock %}</p>
          </div>
        </div>
        <div class="container mt-3">
          <div class="card">
            <div class="card-body">
                <h5 class="card-title">WebSocket Messages</h5>
                <p class="card-text"><code id="messages"></code></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
        var wsprotocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://'
        var ws = wsprotocol + window.location.hostname + ':' + window.location.port + '/ws/'
        var socket = new WebSocket(ws);

        socket.onopen = function() {
          // Web Socket is connected, send some text
          socket.send("Text from Javascript");
          // Send some binary data
          socket.send(new Blob(["Bytes from Javascript"]));
        };

        socket.onmessage = function (evt) {
          console.log(evt)
          var received_msg = evt.data;
          console.log("Message received...", received_msg);
          var node = document.createElement("div");
          if (received_msg instanceof Blob) {
            received_msg.text().then(function (received_text) {
              var textnode = document.createTextNode("> " + received_text);
              node.appendChild(textnode);
              document.getElementById("messages").appendChild(node);
            })
          } else {
            var textnode = document.createTextNode("> " + received_msg);
            node.appendChild(textnode);
            document.getElementById("messages").appendChild(node);
          }
        };
    </script>
  </body>
</html>
